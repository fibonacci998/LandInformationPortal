<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:body>

	<ui:composition template="/template/admin/adminLayout.xhtml">

		<ui:define name="content">
            <div id="formControl">
	            <h:form id="form">
				    <p:growl id="msgs" showDetail="true"/>
				 
				    <p:panel header="Chọn địa điểm" style="margin-bottom:10px;">
				    	<div class="form-group row">
				    		<div class="col-md">
				    			<input id="searchbox-Address" class="controls" type="text" placeholder="Search Box"/>
				    		</div>
				    	</div>
						<div class="form-group row">
							<div class="col-md">
								<h:selectOneMenu id="cbb-Province" value="#{manageGeoInfoBean.provinceIdSelected}" >
					                <p:ajax listener="#{manageGeoInfoBean.provinceChange}" update="cbb-District"/>
					                <f:selectItem itemLabel="Tỉnh/Thành phố" itemValue=""/>
					                <f:selectItems value="#{manageGeoInfoBean.listProvince}" var="element"
					                itemLabel="#{element.provinceName}" itemValue="#{element.provinceId}"/>
					            </h:selectOneMenu>
							</div>
							<div class="col-md">
								<h:selectOneMenu id="cbb-District" value="#{manageGeoInfoBean.districtIdSelected}">
									<p:ajax listener="#{manageGeoInfoBean.districtChange}" update="cbb-Street cbb-SegmentOfStreet"></p:ajax>
					                <f:selectItem itemLabel="Quận/Huyện" itemValue=""/>
					                <f:selectItems value="#{manageGeoInfoBean.listDistrict}" var="element"
					                itemLabel="#{element.districtName}" itemValue="#{element.districtId}"/>
					            </h:selectOneMenu>
							</div>
						</div>
				        <div class="form-group row">
				        	<div class="col-md">
				        		<h:selectOneMenu id="cbb-Street" value="#{manageGeoInfoBean.streetIdSelected}" >
				        			<p:ajax	listener="#{manageGeoInfoBean.streetChange}" update="cbb-SegmentOfStreet"></p:ajax>
				        			
					                <f:selectItem itemLabel="Đường phố" itemValue=""/>
					                <f:selectItems value="#{manageGeoInfoBean.listStreet}" var="element"
					                itemLabel="#{element.streetName}" itemValue="#{element.streetId}"/>
					            </h:selectOneMenu>
				        	</div>
				        	<div class="col-md">
				        		<h:selectOneMenu id="cbb-SegmentOfStreet" value="#{manageGeoInfoBean.segmentStreetIdSelected}">
					                <f:selectItem itemLabel="Đoạn đường" itemValue=""/>
					                <f:selectItems value="#{manageGeoInfoBean.listSegmentOfStreet}" var="element"
					                itemLabel="#{element.segmentName}" itemValue="#{element.segmentId}"/>
					            </h:selectOneMenu>
				        	</div>
				        </div>
				        <p:separator />
				 		<div class="form-group row">
				 			<div class="col-md">
				 				<p:outputLabel for="cbb-IpgType" value="Thao tác với">
								</p:outputLabel>
				 			</div>
				 			<div class="col-md">
				 				<h:selectOneMenu id="cbb-IpgType" value="#{manageGeoInfoBean.processType}">
									<p:ajax update="@form"></p:ajax>
									<f:selectItem itemLabel="Tỉnh/Thành phố" itemValue="1"></f:selectItem>
									<f:selectItem itemLabel="Quận/Huyện" itemValue="2"></f:selectItem>
									<f:selectItem itemLabel="Đường phố" itemValue="3"></f:selectItem>
									<f:selectItem itemLabel="Đoạn đường" itemValue="4"></f:selectItem>
								</h:selectOneMenu>
				 			</div>
				 		</div>
					    <div class="form-group row">
				 			<div class="col-md">
				 				<p:outputLabel for="txtinput-Name" value="Tên">
								</p:outputLabel>	
				 			</div>
				 			<div class="col-md">
				 				<h:inputText id="txtinput-Name" value="#{manageGeoInfoBean.nameInput}"></h:inputText>
				 			</div>
						 </div>
						<h:panelGroup rendered="#{manageGeoInfoBean.processType != '4'}">
							<div class="form-group row">
								<div class="col-md">
									<p:outputLabel value="Tọa độ địa lý"></p:outputLabel>
								</div>
								<div class="col-md">
									<h:inputText id="txtinput-lngSingleCoordinate" value="#{manageGeoInfoBean.lngSingleCoordinate}"></h:inputText>
									<h:inputText id="txtinput-latSingleCoordinate" value="#{manageGeoInfoBean.latSingleCoordinate}"></h:inputText>
								</div>
							</div>
						</h:panelGroup>
						<h:panelGroup rendered="#{manageGeoInfoBean.processType == '4'}">
							<div class="form-group row">
								<div class="col-md">
									<p:outputLabel for="multiCoordinate" value="Tọa độ cấu tạo"></p:outputLabel>
								</div>
								<div class="col-md">
									
									<h:inputTextarea id="multiCoordinate"></h:inputTextarea>
								</div>
								<div>
									<p:commandButton value="Add new row" styleClass="ui-priority-primary" process="@this" update=":form:msgs"
	                              	 oncomplete="PF('table-coordinate').addRow();" action="#{manageGeoInfoBean.addNewRow()}"/>
	                              	
									<p:dataTable id="table-coordinate" widgetVar="table-coordinate" value="#{manageGeoInfoBean.listCoordinate}" 
									editable="true" var="coordinate" styleClass="test">
										<p:column headerText="Longitude">
											<p:cellEditor>
												<f:facet name="output"> <h:outputText value="#{coordinate.longitude}"></h:outputText> </f:facet>
												<f:facet name="input"> <p:inputText id="txtInput-longitude"
												value="#{coordinate.longitude}"></p:inputText> </f:facet>
											</p:cellEditor>
										</p:column>
										<p:column headerText="Latitude">
											<p:cellEditor>
												<f:facet name="output"> <h:outputText value="#{coordinate.latitude}"></h:outputText> </f:facet>
												<f:facet name="input"> <p:inputText id="txtInput-latitude"
												value="#{coordinate.latitude}"></p:inputText> </f:facet>
											</p:cellEditor>
										</p:column>
										<p:column style="width:32px">
								            <p:rowEditor />
								        </p:column>
									</p:dataTable>
								</div>
							</div>
						</h:panelGroup >
						<p:separator />
						<div class="form-group row">
				 			<div class="col-md">
				 				<h:commandButton value="Thêm mới" action="#{manageGeoInfoBean.addButtonClick}">
				 					<f:ajax execute="@form" render="@form" ></f:ajax>
				 				</h:commandButton>
				 			</div>
				 			<div class="col-md">
				 				<h:commandButton value="Lưu"></h:commandButton>
				 			</div>
				 			<div class="col-md">
				 				<h:commandButton value="Xóa"></h:commandButton>
				 			</div>
				 		</div>
				    </p:panel>
				</h:form>
			</div>
            <div id="map" style="height:80%"></div>
            
		</ui:define>
		<ui:define name="footer">
			<h:outputScript name="managegeoinfo.js" library="js" />
			<script type="text/javascript"
				src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCHI3U4hbpOvJL1QgtkTqopAm1pc53xjCE&amp;libraries=places&amp;callback=initMap"
				async="true" defer="true"></script>
		</ui:define>
	</ui:composition>
</h:body>

</html>
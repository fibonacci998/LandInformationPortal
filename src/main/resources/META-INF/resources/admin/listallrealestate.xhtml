<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <head>
    </head>
    <body>
        <ui:composition template="/template/admin/adminLayout.xhtml">
            <ui:define name="content">
                <h:outputStylesheet name="listallrealestate.css" library="css" />
                <h:outputStylesheet name="bootstrap.min.css" library="css" />
                <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />

                <h:form id="form-AllRealEstate" prependId="false">

                    <h:commandButton id="btn-ChangeRealEstateStatusConfused"
                                     value="CONFUSED"
                                     action="#{listAllRealEstateBean.changeRealEstateStatusToConfused()}">
                        <p:ajax process="@form" update="form-AllRealEstate"/>
                    </h:commandButton>
                    <h:commandButton id="btn-ChangeRealEstateStatusNotVerified"
                                     value="NOT VERIFIED"
                                     action="#{listAllRealEstateBean.changeRealEstateStatusToNotVerified()}">
                        <p:ajax process="@form" update="form-AllRealEstate"/>
                    </h:commandButton>
                    <h:commandButton id="btn-ChangeRealEstateStatusVerified"
                                     value="VERIFIED"
                                     action="#{listAllRealEstateBean.changeRealEstateStatusToVerified()}">
                        <p:ajax process="@form" update="form-AllRealEstate"/>
                    </h:commandButton>
                    <h:commandButton id="btn-DeleteSelectedRealEstate"
                                     value="DELETE"
                                     action="#{listAllRealEstateBean.deleteSelectedRealEstate()}">
                        <p:ajax process="@form" update="form-AllRealEstate"/>
                    </h:commandButton>



                    <p:dataTable var="realEstate"
                                 value="#{listAllRealEstateBean.lazyReo}"
                                 rowKey="#{realEstate.realEstateId}"
                                 selection="#{listAllRealEstateBean.listSelectedRealEstate}"
                                 resizableColumns="true" 
                                 liveResize="true"
                                 widgetVar="table-real-estate"
                                 rows="10"
                                 paginator="true"
                                 lazy="true"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records">
                        <p:column selectionMode="multiple" style="width:5%;text-align:center"/>
                        <p:column headerText="ID" style="width: 5%;text-align:center">
                            <h:outputText value="#{realEstate.realEstateId}"/>
                        </p:column>
                        <p:column headerText="Name">
                            <a href="/viewrealestatedetail.xhtml?realEstateId=#{realEstate.realEstateId}" target="_blank"><h:outputText value="#{realEstate.realEstateName}" /></a>
                        </p:column>
                        <p:column headerText="Price">
                            <h:outputText value="#{realEstate.realEstatePrice}" />
                        </p:column>
                        <p:column headerText="Coordinate">
                            <h:outputText value="#{realEstate.realEstateLat}" /> , <h:outputText value="#{realEstate.realEstateLng}" />
                        </p:column>
                        <p:column headerText="Address">
                            <h:outputText value="#{realEstate.realEstateAddress}" />
                        </p:column>
                        <p:column filterBy="#{realEstate.realEstateSource}" filterMatchMode="exact" style="width: 15%;text-align:center">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('table-real-estate').filter()" styleClass="custom-filter">
                                    <f:selectItem itemLabel="All Source" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{listAllRealEstateBean.listRealEstateSource}" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{realEstate.realEstateSource}" />
                        </p:column>
                        <p:column filterBy="#{realEstate.realEstateStatus}" filterMatchMode="exact" style="width: 10%;text-align:center">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('table-real-estate').filter()" styleClass="custom-filter">
                                    <f:selectItem itemLabel="All Status" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="CONFUSED" itemValue="-1" />
                                    <f:selectItem itemLabel="NOT VERIFIED" itemValue="0" />
                                    <f:selectItem itemLabel="VERIFIED" itemValue="1" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="CONFUSED" style="color: red" rendered="#{realEstate.realEstateStatus == '-1'}"/>
                            <h:outputText value="NOT VERIFIED" style="color: #f6b102" rendered="#{realEstate.realEstateStatus == '0'}"/>
                            <h:outputText value="VERIFIED" style="color: green" rendered="#{realEstate.realEstateStatus == '1'}"/>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </ui:define>
            <ui:define name="footer">
                <h:outputScript name="markerclustererplus.min.js" library="js"></h:outputScript>
                <h:outputScript name="listallrealestate.js" library="js" />
            </ui:define>
        </ui:composition>
    </body>
</html>
